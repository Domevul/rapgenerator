# コアゲームループ

## 1. 事前準備フェーズ（歌詞構築）

### 1-1. 歌詞パターン選択システム
- **選択方式**: 3-4つの完成歌詞パターンから1つを選択
- **歌詞構成**: 各パターンは4行構成（1ターン分）
- **韻構造**: 各パターンで韻の踏み方が異なる（AA-BB型、AB-AB型等）
- **戦略要素**: 相手のスタイルや前ターンの内容に応じた歌詞選択

### 1-2. 歌詞パターン例
```
パターンA（攻撃的）:
「俺のフロウは最強、ビートを支配する
 お前のライムは弱小、勝負にならない」

パターンB（技巧的）:
「韻を踏むのは俺の専門、リズムも完璧
 君のスタイルじゃこのバトル、勝利は不可能」

パターンC（挑発的）:
「ここは俺のステージ、お前は帰れ
 実力の差を見せてやる、これが真のMC」
```

## 2. バトルフェーズ（リアルタイム）

### 2-1. 歌詞選択とリズム判定
- **UI**: 事前選択した3-4の歌詞パターンがボタンとして表示
- **操作**: 相手のラップを聞いた後、適切な歌詞を選択してタップ
- **リズム判定**: 選択後、ビートに合わせて歌詞を「発動」
- **判定**: Good（±100ms）/ Perfect（±50ms）の2段階精度判定

### 2-2. ターン構成
- **総ターン数**: 4ターン
- **1ターン構成**: 4小節（16拍）
- **進行順序**:
  1. 相手のラップ（固定パフォーマンス）
  2. 自分のラップ（プレイヤー操作）
  3. 以下交互に4ターンまで継続

### 2-3. 分岐システム（簡素化）
- **分岐タイミング**: 3-4ターン目のみ
- **分岐パターン**: 2通りの展開
- **分岐条件**: 1-2ターン目の総合スコアに基づく
  - 高スコア: 相手が本気モードで挑発的な内容
  - 低スコア: 相手が優勢で余裕のある内容
